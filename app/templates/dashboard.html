{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
  <h1>Dashboard</h1>
  <p class="muted">Vue rapide — activité & répartition par rôle.</p>

  <div class="grid">
    <div class="card">
      <h2>Total questions</h2>
      <div class="big">{{ total_logs }}</div>
      <div class="muted small">Total de lignes dans l’historique</div>
    </div>

    <div class="card">
      <h2>Répartition par rôle</h2>
      <div class="row" style="flex-wrap:wrap;">
        <span class="badge role-student">Student: <strong>{{ roles.student }}</strong></span>
        <span class="badge role-teacher">Teacher: <strong>{{ roles.teacher }}</strong></span>
        <span class="badge role-admin">Admin: <strong>{{ roles.admin }}</strong></span>
      </div>
      <div class="card" style="margin-top:12px;">
          <h2>Top 5 questions</h2>

          {% if top_questions and top_questions|length > 0 %}
            <ol>
              {% for t in top_questions %}
                <li>
                  <b>{{ t.count }}</b> — {{ t.question }}
                </li>
              {% endfor %}
            </ol>
          {% else %}
            <div class="muted">Pas assez de données pour afficher le Top 5.</div>
          {% endif %}
        </div>
    </div>
  </div>
{% endblock %}
